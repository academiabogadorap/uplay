<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Torneo: PRUEBA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="csrf-token" content="ImQ3NTYxNjAyNjQ5M2MyN2RiOGZhOWJjN2U1OTcxY2VhNzM2NDNlYjUi.aQn6EQ.5NzTkBdWyQg6ProKIRJkfu0QjR8" />

  <!-- Tipograf√≠a -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    /* === (mantuve exactamente tus estilos) === */
    :root{ --blue-900:#004B8D; --blue-800:#0a4a82; --blue-700:#0d5fa1; --blue-600:#0f6fb7; --panel:#0e3f6e; --panel-2:#0b355d; --text:#ffffff; --muted:#cfe3f7; --neon:#8AE80C; --yellow:#F6C90E; --danger:#ff5252; --warn:#ffd166; --ok:#00c853; --radius:14px; --shadow:0 14px 40px rgba(0,0,0,.28); }
    html,body{margin:0; padding:0; height:100%;}
    body{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text);
      background:
        radial-gradient(1400px 800px at -10% -20%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(1200px 700px at 110% 120%, rgba(255,255,255,.05), transparent 60%),
        linear-gradient(180deg, var(--blue-900), #053966 55%, #042c4f);
      min-height:100%; line-height:1.5;
    }
    .container{max-width:1120px; margin:18px auto; padding:0 14px;}
    nav{ position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.4) blur(6px); background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.05)); border-bottom:1px solid rgba(255,255,255,.12); }
    .nav-inner{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; padding:10px 14px; max-width:1120px; margin:0 auto; }
    .brand{ display:flex; align-items:center; gap:10px; text-decoration:none; padding:4px 6px; border-radius:12px; }
    .brand:hover{background:rgba(255,255,255,.07);} .brand img{height:38px; display:block;}
    .brand-text{display:flex; flex-direction:column; line-height:1.05;}
    .brand-text strong{ font-family:"Poppins", system-ui; font-size:1.08rem; letter-spacing:.02em; }
    .brand-text small{ font-family:"Poppins", system-ui; font-size:.78rem; letter-spacing:.1em; text-transform:uppercase; color:var(--neon); }
    nav a{color:var(--text); text-decoration:none; opacity:.92;} nav a:hover{opacity:1; color:var(--neon);} .spacer{flex:1;}
    .card{ background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid rgba(255,255,255,.10); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow); }
    .card + .card{margin-top:12px;} .card h3{margin:0 0 8px; font-size:1.12rem;}
    .btn, button{ appearance:none; border:0; cursor:pointer; padding:10px 14px; border-radius:12px; font-weight:700; color:#001a2e; background:linear-gradient(180deg, var(--neon), #74d30b); transition:transform .12s ease, filter .12s ease; text-decoration:none; display:inline-flex; align-items:center; gap:8px; }
    .btn:hover, button:hover{transform:translateY(-1px); filter:brightness(1.05);} .btn:active, button:active{transform:translateY(0);}
    .btn-ghost{ color:var(--text); background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.18); } .btn-ok{background:linear-gradient(180deg, #20e27a, #0cc567); color:#002a1c;} .btn-danger{background:linear-gradient(180deg, #ff6b6b, #ff5252); color:#2a0000;} .btn-warning{background:linear-gradient(180deg, var(--yellow), #e4b800); color:#2a1f00;} .btn-slim{padding:7px 10px; border-radius:10px; font-weight:600;}
    label{display:block; font-size:.92rem; color:var(--muted); margin:6px 0 4px;} input, select, textarea{ width:100%; max-width:460px; outline:none; background:#072e55; color:var(--text); border:1px solid rgba(255,255,255,.18); padding:9px 11px; border-radius:12px; }
    input:focus, select:focus, textarea:focus{ border-color:var(--neon); box-shadow:0 0 0 3px rgba(138,232,12,.15); }
    table{ width:100%; border-collapse:separate; border-spacing:0; border-radius:16px; overflow:hidden; background:rgba(255,255,255,.03); box-shadow:var(--shadow); }
    thead th{ background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.15)); color:var(--muted); font-size:.82rem; letter-spacing:.06em; text-transform:uppercase; }
    th, td{ padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.10); text-align:left; } tbody tr:hover{background:rgba(138,232,12,.08);} tbody tr:last-child td{border-bottom:0;}
    .badge{ display:inline-block; font-size:.78rem; padding:3px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.10); color:#fff; }
    .badge-ok{background:linear-gradient(180deg, rgba(32,226,122,.25), rgba(12,197,103,.20)); border-color:rgba(32,226,122,.55);} .badge-warn{background:linear-gradient(180deg, rgba(246,201,14,.28), rgba(246,201,14,.16)); border-color:rgba(246,201,14,.6);} .badge-danger{background:linear-gradient(180deg, rgba(255,82,82,.25), rgba(255,82,82,.16)); border-color:rgba(255,82,82,.6);}
    .flash-ok{background:rgba(0,200,83,.18); border:1px solid rgba(0,200,83,.55); color:#e8fff1; padding:10px; border-radius:12px; margin:8px 0;} .flash-error{background:rgba(255,82,82,.18); border:1px solid rgba(255,82,82,.55); color:#ffe8e8; padding:10px; border-radius:12px; margin:8px 0;} .flash-warning{background:rgba(246,201,14,.18); border:1px solid rgba(246,201,14,.55); color:#fff8dc; padding:10px; border-radius:12px; margin:8px 0;}
    .muted{color:var(--muted);} .help-fab{ position:fixed; right:20px; bottom:20px; z-index:999; width:56px; height:56px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, var(--neon), #74d30b); color:#012; font-size:22px; border:1px solid rgba(255,255,255,.20); box-shadow:0 14px 40px rgba(0,0,0,.35); } .help-fab:hover{transform:translateY(-1px); filter:brightness(1.05);}
    .help-backdrop{position:fixed; inset:0; display:none; z-index:1000; background:rgba(1,18,34,.65);} .help-dialog{ background:linear-gradient(180deg, var(--panel), var(--panel-2)); color:var(--text); width:min(860px, 94vw); margin:6vh auto; border-radius:var(--radius); border:1px solid rgba(255,255,255,.12); box-shadow:0 28px 70px rgba(0,0,0,.5); overflow:hidden; } .help-header{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; background:rgba(0,0,0,.25); border-bottom:1px solid rgba(255,255,255,.10); } .help-title{margin:0; font-size:1.06rem; font-weight:800; letter-spacing:.02em;} .help-close{ background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.18); border-radius:10px; padding:6px 10px; cursor:pointer; color:var(--text);} .help-body{padding:14px;} .help-grid{display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(240px,1fr));} .help-section{ background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.10); border-radius:12px; padding:12px; } .help-section h4{margin:0 0 8px; font-size:1rem; color:#eaf6ff;} .help-section p{margin:0; color:var(--muted);} .help-links a{display:inline-block; margin:6px 8px 0 0; color:var(--neon); text-decoration:none; font-weight:700;} .help-links a:hover{text-decoration:underline;} .help-footer{ padding:12px 14px; border-top:1px solid rgba(255,255,255,.10); display:flex; gap:8px; justify-content:flex-end; background:rgba(0,0,0,.18); }
    @media (prefers-reduced-motion:no-preference){ .help-dialog{animation:pop .16s ease-out;} @keyframes pop{from{transform:scale(.98); opacity:.75;} to{transform:scale(1); opacity:1;} } }
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <!-- Marca -->
      <a href="/" class="brand" aria-label="UPLAY inicio">
        <img src="/static/logo/uplay-logo.svg" alt="UPLAY">
        <span class="brand-text">
          <strong>UPLAY</strong>
          <small>Vos jug√°s, Vos ascendes!</small>
        </span>
      </a>

      <!-- Enlaces -->
      <a href="/">Inicio</a>
      
        <a href="/categorias">Categor√≠as</a>
        <a href="/jugadores">Jugadores</a>
        <a href="/partidos">Partidos</a>
        <a href="/desafios">Desaf√≠os</a>
        <a href="/abiertos">Abiertos</a>
        <a href="/torneos">Torneos</a>
        <a href="/ranking">Ranking</a>
        <a href="/admin">Admin</a>
      
      <span class="spacer"></span>

      
        <a href="/mi" class="btn-ghost btn-slim">Mi panel (ADMINISTRADOR)</a>
        <form method="post" action="/logout" style="display:inline;">
          
          <input type="hidden" name="csrf_token" value="ImQ3NTYxNjAyNjQ5M2MyN2RiOGZhOWJjN2U1OTcxY2VhNzM2NDNlYjUi.aQn6EQ.5NzTkBdWyQg6ProKIRJkfu0QjR8">
          <button type="submit" class="btn btn-slim">Salir</button>
        </form>
      
    </div>
  </nav>

  <div class="container">
    
    

    
    
      
        
          <div class="flash-error">Sesi√≥n expirada o formulario inv√°lido. Volv√© a intentar.</div>
        
      
    

    
    <noscript>
      <div class="flash-warning">Para una experiencia completa activ√° JavaScript. Si us√°s herramientas autom√°ticas (curl/tests), asegurate de enviar el campo <code>csrf_token</code> en los formularios.</div>
    </noscript>

    
<style>
  /* ====== HERO (match con /mi) ====== */
  .hero{
    position:relative; overflow:hidden; border-radius:16px; padding:14px;
    background:
      radial-gradient(700px 260px at 0% 0%, rgba(138,232,12,.25), transparent 60%),
      radial-gradient(700px 260px at 100% 100%, rgba(246,201,14,.18), transparent 60%),
      linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.10));
    border:1px solid rgba(255,255,255,.12); box-shadow:0 14px 40px rgba(0,0,0,.28);
    margin-bottom:10px;
  }
  .hero-top{ display:flex; gap:12px; align-items:flex-end; justify-content:space-between; flex-wrap:wrap; }
  .hero-title{ margin:0; font-family:"Poppins",system-ui; font-weight:800; letter-spacing:.3px; }
  .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;}
  .chip{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px;
         background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.16); font-weight:700; }
  .dot{width:8px; height:8px; border-radius:50%;}
  .dot.g{ background:var(--neon); } .dot.y{ background:var(--yellow); } .dot.b{ background:#6EA8FF; }

  /* ===== Badges ===== */
  .badge{ display:inline-block; padding:3px 9px; border-radius:999px; font-size:.8rem;
          border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.08); color:#e6edf3; }
  .state-BORRADOR{ background:#2a2431; border-color:#5a4678; color:#e9d7ff; }
  .state-CANCELADO{ background:#3b1b1b; border-color:#701a1a; color:#ffe1e1; }
  .state-INSCRIPCION{ background:#1b2f3b; border-color:#1a4d70; color:#d6eaff; }
  .state-INSCRIPCION_CERRADA{ background:#3b2f1b; border-color:#704d1a; color:#ffecc7; }
  .state-EN_JUEGO{ background:#1b3b2a; border-color:#1a704d; color:#d7ffe9; }
  .state-FINALIZADO{ background:#212121; border-color:#464646; color:#e6e6e6; }

  /* ===== Botones ===== */
  .btn{ cursor:pointer; }
  .btn-slim{ height:36px; padding:6px 10px; border-radius:10px; font-weight:700; }
  .btn-ghost{ background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.18); }

  /* ===== Tabla de posiciones ===== */
  .zona-card{ border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); padding:10px; margin-top:10px; }
  .zona-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
  table.posiciones{ width:100%; border-collapse:collapse; margin-top:6px; }
  table.posiciones th, table.posiciones td{ padding:6px 8px; border-bottom:1px solid rgba(255,255,255,.08); text-align:center; font-size:.9rem; }
  table.posiciones th{ color:var(--muted,#9fb3c8); font-weight:700; background:rgba(255,255,255,.03); }
  table.posiciones td:first-child{ text-align:left; }
  table.posiciones tr:first-child td{ border-top:1px solid rgba(255,255,255,.08); }
  .muted{ color:var(--muted,#9fb3c8); }
  .mini{ font-size:.86rem; }
</style>

<!-- ===== HERO ===== -->
<div class="hero">
  <div class="hero-top">
    <div>
      <h2 class="hero-title">PRUEBA</h2>
      <div class="chips">
        <span class="chip"><span class="dot b"></span> Estado: <span class="badge state-EN_JUEGO">EN_JUEGO</span></span>
        
        
        <span class="chip"><span class="dot g"></span> INDIVIDUAL</span>
        
        <span class="chip"><span class="dot y"></span> AMERICANO</span>
      </div>
    </div>
    <div class="hero-actions" style="display:flex; gap:8px; flex-wrap:wrap;">
      <a href="/admin/torneos" class="btn btn-ghost btn-slim">Volver</a>
      <a href="/torneos/1" class="btn btn-ghost btn-slim">Ver p√°gina p√∫blica</a>
    </div>
  </div>
</div>

<!-- INFO -->
<div class="card torneo-info">
  <div class="info-grid">
    <div class="info-item"><strong>Modalidad</strong><span>SINGLES</span></div>
    <div class="info-item"><strong>Formato</strong><span>AMERICANO</span></div>
    <div class="info-item"><strong>Categor√≠a</strong><span>4ta CABALLEROS</span></div>
    <div class="info-item"><strong>Inicio</strong><span>-</span></div>
    <div class="info-item"><strong>Sede</strong><span>1114 Padel Club</span></div>
    <div class="info-item"><strong>Cupo m√°ximo</strong><span>4</span></div>
  </div>
  
</div>

<!-- ACCIONES -->
<div class="card actions">
  <div class="actions-row">
    
      <form method="post" action="/admin/torneos/1/generar_fixture" class="seg">
        <input type="hidden" name="csrf_token" value="ImQ3NTYxNjAyNjQ5M2MyN2RiOGZhOWJjN2U1OTcxY2VhNzM2NDNlYjUi.aQn6EQ.5NzTkBdWyQg6ProKIRJkfu0QjR8">
        <label for="modo">Modo</label>
        <select name="modo" id="modo">
          <option value="AMERICANO">Americano</option>
          <option value="ROUND_ROBIN">Round Robin (por zonas)</option>
          <option value="ZONAS_LLAVE">Zonas (1v2 / 3v4 ‚Üí Ganadores y Perdedores)</option>
          <option value="PLAYOFF">Playoff</option>
          <option value="PLAYOFF_NEXT">Siguiente ronda</option>
        </select>
        <label for="zonas">Zonas</label>
        <select name="zonas" id="zonas">
          
            <option value="1" selected>1</option>
          
            <option value="2" >2</option>
          
            <option value="3" >3</option>
          
            <option value="4" >4</option>
          
            <option value="5" >5</option>
          
            <option value="6" >6</option>
          
            <option value="7" >7</option>
          
            <option value="8" >8</option>
          
            <option value="9" >9</option>
          
            <option value="10" >10</option>
          
            <option value="11" >11</option>
          
            <option value="12" >12</option>
          
            <option value="13" >13</option>
          
            <option value="14" >14</option>
          
            <option value="15" >15</option>
          
            <option value="16" >16</option>
          
        </select>
        <div id="grupo-roundrobin" style="display:none;">
          <label for="parejas_por_zona">Parejas por zona</label>
          <select name="parejas_por_zona" id="parejas_por_zona">
            
              <option value="2" >2</option>
            
              <option value="3" >3</option>
            
              <option value="4" selected>4</option>
            
              <option value="5" >5</option>
            
              <option value="6" >6</option>
            
              <option value="7" >7</option>
            
              <option value="8" >8</option>
            
          </select>
        </div>
        <button type="submit" class="btn btn-slim">Generar fixture</button>
      </form>

      <form method="post" action="/admin/torneos/1/generar_playoff_desde_zonas" class="seg">
        <input type="hidden" name="csrf_token" value="ImQ3NTYxNjAyNjQ5M2MyN2RiOGZhOWJjN2U1OTcxY2VhNzM2NDNlYjUi.aQn6EQ.5NzTkBdWyQg6ProKIRJkfu0QjR8">
        <button type="submit" class="btn btn-ghost btn-slim">Generar Playoff desde Zonas</button>
      </form>
    
  </div>
</div>

<!-- PARTIDOS -->
<div class="card section">
  <h3>Partidos y resultados</h3>
  
    <table class="table">
      <thead><tr><th>#</th><th>Ronda</th><th>Partido</th><th>Estado</th></tr></thead>
      <tbody>
        
          <tr>
            <td>1</td>
            <td>R1</td>
            <td>1 vs 3</td>
            <td>JUGADO</td>
          </tr>
        
          <tr>
            <td>2</td>
            <td>R2</td>
            <td>1 vs 2</td>
            <td>JUGADO</td>
          </tr>
        
          <tr>
            <td>3</td>
            <td>R3</td>
            <td>1 vs 2</td>
            <td>JUGADO</td>
          </tr>
        
      </tbody>
    </table>
  
</div>

<!-- üî• NUEVA SECCI√ìN: TABLAS DE POSICIONES POR ZONA -->

  <div class="card section">
    <h3>Tabla de posiciones por zonas</h3>
    
      <div class="zona-card">
        <div class="zona-header">
          <h4>Zona 1</h4>
          <span class="muted">3 parejas</span>
        </div>
        <table class="posiciones">
          <thead>
            <tr>
              <th>Pareja</th><th>PJ</th><th>PG</th><th>PP</th><th>Sets+</th><th>Sets‚àí</th><th>Dif</th><th>Pts</th>
            </tr>
          </thead>
          <tbody>
            
              <tr>
                <td>Pareja #1</td>
                <td>3</td>
                <td>2</td>
                <td>1</td>
                <td>6</td>
                <td>0</td>
                <td>6</td>
                <td><strong>5</strong></td>
              </tr>
            
              <tr>
                <td>Pareja #2</td>
                <td>2</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>4</td>
                <td>-4</td>
                <td><strong>3</strong></td>
              </tr>
            
              <tr>
                <td>Pareja #3</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>2</td>
                <td>-2</td>
                <td><strong>1</strong></td>
              </tr>
            
          </tbody>
        </table>
      </div>
    
  </div>


<script>
  const modoSelect = document.getElementById('modo');
  const grupoRoundRobin = document.getElementById('grupo-roundrobin');
  function actualizarVisibilidad() {
    if (modoSelect.value === 'ROUND_ROBIN' || modoSelect.value === 'ZONAS_LLAVE') {
      grupoRoundRobin.style.display = 'flex';
    } else {
      grupoRoundRobin.style.display = 'none';
    }
  }
  modoSelect.addEventListener('change', actualizarVisibilidad);
  actualizarVisibilidad();
</script>


  </div>

  <!-- FAB de Ayuda -->
  <button class="help-fab" id="helpFab" aria-label="Ayuda" title="Ayuda">‚ùî</button>

  <!-- Modal de Ayuda -->
  <div class="help-backdrop" id="helpBackdrop" aria-hidden="true">
    <div class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
      <div class="help-header">
        <h3 class="help-title" id="helpTitle">¬øC√≥mo usar UPLAY?</h3>
        <button class="help-close" id="helpClose" aria-label="Cerrar">Cerrar</button>
      </div>
      <div class="help-body">
        
          <div class="help-grid">
            <section class="help-section">
              <h4>Men√∫ principal</h4>
              <p>
                <strong>Ranking:</strong> tu posici√≥n y categor√≠a.<br>
                <strong>Desaf√≠os:</strong> crear/aceptar retos.<br>
                <strong>Partidos abiertos:</strong> anotate cuando haya cupos.<br>
                <strong>Mi Panel:</strong> tus propuestas, confirmaciones y estado.
              </p>
            </section>
            <section class="help-section">
              <h4>Resultados y confirmaciones</h4>
              <p>Una pareja propone el resultado, la otra confirma. Si pasan 12h sin respuesta, se cierra autom√°tico.</p>
            </section>
            <section class="help-section">
              <h4>Estados de partido</h4>
              <p>
                <span class="badge">PENDIENTE</span> invitaci√≥n/confirmaci√≥n ¬∑
                <span class="badge badge-warn">PROPUESTO</span> esperando confirmaci√≥n ¬∑
                <span class="badge badge-ok">JUGADO</span> cerrado.
              </p>
            </section>
          </div>
        
        <div class="help-links" style="margin-top:10px;">
          <a href="/ranking">Ir al Ranking</a>
          <a href="/desafios">Ver Desaf√≠os</a>
          <a href="/abiertos">Partidos Abiertos</a>
          <a href="/mi">Mi Panel</a>
        </div>
      </div>
      <div class="help-footer">
        <a class="btn btn-ghost" href="mailto:bogadoacademia@gmail.com">Soporte</a>
        <button class="btn" id="helpOk">Entendido</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const fab = document.getElementById('helpFab');
      const backdrop = document.getElementById('helpBackdrop');
      const closeBtn = document.getElementById('helpClose');
      const okBtn = document.getElementById('helpOk');

      function openHelp(){ backdrop.style.display='block'; backdrop.setAttribute('aria-hidden','false'); setTimeout(()=> closeBtn.focus(), 10); }
      function closeHelp(){ backdrop.style.display='none'; backdrop.setAttribute('aria-hidden','true'); fab.focus(); }

      fab.addEventListener('click', openHelp);
      closeBtn.addEventListener('click', closeHelp);
      okBtn.addEventListener('click', closeHelp);
      backdrop.addEventListener('click', (e)=>{ if(e.target===backdrop) closeHelp(); });
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeHelp(); });
    })();

    // CSRF auto-injection (mantengo tu comportamiento original)
    (function addCsrfToForms(){
      const tokenMeta = document.querySelector('meta[name="csrf-token"]');
      if(!tokenMeta) return;
      const token = tokenMeta.content;
      document.querySelectorAll('form[method="post"]').forEach(f=>{
        if(!f.querySelector('input[name="csrf_token"]')){
          const i=document.createElement('input'); i.type='hidden'; i.name='csrf_token'; i.value=token; f.appendChild(i);
        }
      });
    })();
  </script>
</body>
</html>