{% extends "base.html" %}
{% block title %}Nueva Categoría{% endblock %}

{% block content %}
  <h2>Nueva categoría</h2>

  <form method="post" style="max-width:560px; display:grid; gap:10px;">
    <label>Nombre</label>
    <input type="text" name="nombre" placeholder="Ej: 7ma Mixta" required>

    <label>Puntos mínimos</label>
    <input type="number" name="puntos_min" placeholder="Ej: 600" required>

    <label>Puntos máximos</label>
    <input type="number" name="puntos_max" placeholder="Ej: 699" required>

    <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:6px;">
      <button type="submit" class="btn">Crear</button>
      <a href="{{ url_for('categorias_list') }}" class="btn btn-ghost">Volver</a>
    </div>
  </form>
{% endblock %}

{% block help_content %}
<style>
  .help-wrap { max-width: 960px; margin: 0 auto; }
  .help-head { display:flex; align-items:center; gap:10px; margin-bottom:8px; }
  .help-title { margin:0; font-size:1.15rem; }
  .help-sub { margin:0; color:var(--muted,#98a2b3); font-size:.9rem; }

  .help-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap:12px;
    max-height:72vh;      /* entra en pantalla */
    overflow:auto;        /* scroll interno si excede */
    padding-right:6px;
  }

  .help-card {
    background: rgba(255,255,255,.04);
    border: 1px solid rgba(255,255,255,.08);
    border-radius: 10px;
    padding: 12px;
  }
  .help-card h4 { display:flex; align-items:center; gap:8px; margin:0 0 6px; font-size:1rem; }
  .help-card p, .help-card li { margin:4px 0; font-size:.92rem; line-height:1.35; }
  .help-ul, .help-ol { padding-left:18px; margin:6px 0; }

  .chip { display:inline-block; padding:2px 8px; border-radius:999px; font-size:.85rem; border:1px solid #2a2f45; background:#1b2138; margin-right:6px; }
  .chip.ok { background:#1b3b2a; border-color:#1a704d; }
  .chip.warn { background:#3b2f1b; border-color:#704d1a; }
  .chip.info { background:#1b2f3b; border-color:#1a4d70; }

  .help-visual {
    display:flex; align-items:center; justify-content:center;
    background: rgba(255,255,255,.03);
    border:1px dashed rgba(255,255,255,.12);
    border-radius:10px; padding:10px;
  }

  @media (max-width:680px){
    .help-title{font-size:1.05rem;}
    .help-card h4{font-size:.98rem;}
    .help-card p, .help-card li{font-size:.9rem;}
  }
</style>

<div class="help-wrap">
  <div class="help-head">
    <h3 class="help-title">¿Cómo crear una categoría?</h3>
    <p class="help-sub">Guía rápida y visual</p>
  </div>

  <div class="help-grid">
    <!-- Qué es una categoría -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 7h18v10H3z" stroke="currentColor"/><path d="M8 7V5a4 4 0 118 0v2" stroke="currentColor"/>
        </svg>
        ¿Qué es una categoría?
      </h4>
      <p>Un rango de <strong>puntos</strong> que agrupa jugadores (p. ej., “7ma Mixta”). Las reglas de desafíos y abiertos usan estos rangos.</p>
      <div>
        <span class="chip info">Nombre</span>
        <span class="chip ok">Puntos mínimos</span>
        <span class="chip warn">Puntos máximos</span>
      </div>
    </section>

    <!-- Cómo completar el formulario -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h10M4 18h8" stroke="currentColor"/></svg>
        Cómo completar
      </h4>
      <ul class="help-ul">
        <li><strong>Nombre</strong>: texto libre (ej.: <em>6ta Caballeros</em>, <em>7ma Mixta</em>).</li>
        <li><strong>Puntos mínimos</strong>: inicio del rango (entero ≥ 0).</li>
        <li><strong>Puntos máximos</strong>: fin del rango (entero ≥ mínimos).</li>
      </ul>
      <p class="muted">Los jugadores en “zona de ascenso” suelen ser aquellos con puntos ≤ al mínimo de su categoría.</p>
    </section>

    <!-- Buenas prácticas -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2l3 7h7l-5.5 4 2 7-6.5-4.5L5 20l2-7L1 9h7l4-7z" stroke="currentColor"/></svg>
        Buenas prácticas
      </h4>
      <ul class="help-ul">
        <li>Mantené <strong>rangos contiguos</strong> (que no queden huecos ni se pisen).</li>
        <li>Usá nombres consistentes (ej.: <em>6ta</em>, <em>5ta</em>, <em>4ta</em> …).</li>
        <li>Si ya existen categorías, verificá <strong>solapamientos</strong> antes de crear una nueva.</li>
      </ul>
    </section>

    <!-- Visual -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor"/></svg>
        Ejemplo visual
      </h4>
      <div class="help-visual">
        <svg width="280" height="120" viewBox="0 0 280 120" aria-hidden="true">
          <!-- Barra de puntos -->
          <rect x="20" y="58" width="240" height="6" rx="3" fill="#475569"/>
          <!-- Rango min-max -->
          <rect x="60" y="50" width="160" height="22" rx="6" fill="#1b3b2a" stroke="#1a704d"/>
          <text x="140" y="64" fill="#fff" font-size="11" text-anchor="middle">600 ↔ 699</text>
          <!-- Etiquetas -->
          <text x="20" y="45" fill="#9aa3b2" font-size="10">0</text>
          <text x="140" y="45" fill="#9aa3b2" font-size="10">600</text>
          <text x="220" y="45" fill="#9aa3b2" font-size="10">699</text>
        </svg>
      </div>
      <p class="muted" style="margin-top:6px;">Ejemplo: <strong>7ma Mixta</strong> con rango 600–699.</p>
    </section>

    <!-- Reglas que afectan al sistema -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6h12v12H6z" stroke="currentColor"/></svg>
        Reglas del sistema
      </h4>
      <ul class="help-ul">
        <li>Los desafíos inter-nivel usan la <strong>categoría superior</strong> del desafiante.</li>
        <li>“Zona de ascenso” se calcula con respecto al <strong>mínimo</strong> de la categoría.</li>
        <li>Los <strong>abiertos</strong> se crean y filtran por categoría.</li>
      </ul>
    </section>

    <!-- Tipos de errores comunes -->
    <section class="help-card">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 8v4m0 4h.01" stroke="currentColor"/><circle cx="12" cy="12" r="9" stroke="currentColor"/></svg>
        Errores comunes
      </h4>
      <ul class="help-ul">
        <li><strong>Máximo menor al mínimo</strong> → corregí los valores.</li>
        <li><strong>Solapamiento</strong> con otra categoría → ajustá min/max.</li>
        <li>Nombre duplicado o muy similar → considerá un alias claro.</li>
      </ul>
    </section>
  </div>
</div>
{% endblock %}
